{"1":{"filename":"/projects/plane/plane.txt","code":"--@name Plane\n--@author \n--@shared\n\nif SERVER then\n    \n    Throttle = 0\n    W = 0\n    A = 0\n    S = 0\n    D = 0\n    Shift = 0\n    Space = 0\n    Mass = 0\n    for K,V in pairs(entities.self():GetAllConstrainedEnts()) do\n        Mass = Mass + V:GetMass()\n        if V:GetClass() == \"prop_vehicle_prisoner_pod\" then\n            Seat = V:EntIndex()\n        end\n    end\n    Driver = entities.entity(Seat):GetDriver() \n    Text = \"\"\n    Offset = Vector(0,0,0)\n    function NetworkVars()\n        if net.CanSend() then\n            net.Start(\"Throttle\")\n            net.WriteDouble(Throttle)\n            if Driver:IsValid() then\n                net.WriteInt(Driver:EntIndex(),8)\n            else\n                net.WriteInt(-1,8)\n            end\n            net.WriteString(Text)\n            net.Send()\n        end\n    end\n    \n    hook.Add(\"KeyPress\",\"HobPress\",function(ply,key)\n        if ply == Driver then\n            if key == 8 then\n                W = 1\n            elseif key == 512 then\n                A = 1\n            elseif key == 16 then\n                S = 1\n            elseif key == 1024 then\n                D = 1\n            elseif key == 131072 then\n                Shift = 1\n            elseif key == 2 then\n                Space = 1\n            end\n        end\n    end)\n    hook.Add(\"KeyRelease\",\"HobRelease\",function(ply,key)\n        if ply == Driver then\n            if key == 8 then\n                W = 0\n            elseif key == 512 then\n                A = 0\n            elseif key == 16 then\n                S = 0\n            elseif key == 1024 then\n                D = 0\n            elseif key == 131072 then\n                Shift = 0\n            elseif key == 2 then\n                Space = 0\n            end\n        end\n    end)\n    \n    Holo = holograms.create(entities.self():GetPos(),Angle(0,0,0),\"models/hunter/blocks/cube025x025x025.mdl\",Vector(1,1,1))\n    Holo:SetColor(Color(255,0,0))\n    hook.Add(\"Think\",\"HobThink\",function() \n        \n        local ThrstMul = 40 * Mass\n        local PitchMul = 5 * Mass\n        local YawMul = 5 * Mass\n        local RollMul = 700 * Mass\n        \n        --internal vars\n        local Ent = entities.self():IsWeldedTo()\n        Driver = entities.entity(Seat):GetDriver() \n        Throttle = math.Clamp(Throttle + W/100 - S/100, 0 , 1)\n        if Driver:IsValid() then \n            Holo:setPos(Driver:EyePos() + Driver:EyeAngles():Forward()*500 +Offset)\n            Ang = (Driver:EyePos() - Holo:GetPos()):Angle()\n            Ang[2] = Ang[2] - Ent:GetAngles()[2]\n            Ang[2] = Ang[2] + 90\n            Ang[1] = Ang[1] - Ent:GetAngles()[3]\n            Ang:Normalize()\n            Text = \"Pitch: \" .. math.Round(Ang[1]) .. \" Yaw: \" .. math.Round(Ang[2]) .. \" Roll: \" .. (D-A)\n            Ent:ApplyAngForce(Angle(RollMul*(D-A),YawMul*Ang[2],PitchMul*Ang[1]))\n            Ent:ApplyForceCenter(-Ent:GetRight()*ThrstMul*Throttle)\n        end\n        NetworkVars()\n    end)\n    \n\n\nelse\n    Driver = nil\n    Text = \"\"\n    hook.Add(\"net\",\"HobNet\",function(Name)\n        if Name == \"Throttle\" then\n            Throttle = net.ReadDouble()\n            Driver = entities.entity(net.ReadInt(8))\n            Text = net.ReadString()\n        end\n    end)\n    Throttle = 0.5\n    hook.Add(\"HUDPaint\",\"HobPaint\",function() \n        if entities.player() == Driver then\n            local w,h = surface.ScreenW(), surface.ScreenH()\n            surface.SetDrawColor(Color(200,200,200))\n            surface.DrawRect(21,h-160,290,30)\n            surface.SetDrawColor(Color(100,100,100))\n            surface.DrawRect(23,h-158,286*Throttle,26)\n            surface.SetTextColor(Color(255,255,255))\n            surface.SetTextPos(23,h-175)\n            surface.DrawText(Text)\n        end\n    end)\nend"},"2":{"code":"--@name \n--@author \n--@shared\n\nif SERVER then\n    \n    hook.Add(\"PlayerSay\")"},"3":{"filename":"/projects/plane/plane.txt","code":"--@name Plane\n--@author \n--@shared\n\nif SERVER then\n    \n    Throttle = 0\n    W = 0\n    A = 0\n    S = 0\n    D = 0\n    Shift = 0\n    Space = 0\n    Seat = 479\n    Driver = entities.entity(Seat):GetDriver() \n    Mass = 0\n    for K,V in pairs(entities.self():GetAllConstrainedEnts()) do\n        Mass = Mass + V:GetMass()\n    end\n    Text = \"\"\n    Offset = Vector(0,0,0)\n    function NetworkVars()\n        if net.CanSend() then\n            net.Start(\"Throttle\")\n            net.WriteDouble(Throttle)\n            if Driver:IsValid() then\n                net.WriteInt(Driver:EntIndex(),8)\n            else\n                net.WriteInt(-1,8)\n            end\n            net.WriteString(Text)\n            net.Send()\n        end\n    end\n    \n    hook.Add(\"KeyPress\",\"HobPress\",function(ply,key)\n        if ply == Driver then\n            if key == 8 then\n                W = 1\n            elseif key == 512 then\n                A = 1\n            elseif key == 16 then\n                S = 1\n            elseif key == 1024 then\n                D = 1\n            elseif key == 131072 then\n                Shift = 1\n            elseif key == 2 then\n                Space = 1\n            end\n        end\n    end)\n    hook.Add(\"KeyRelease\",\"HobRelease\",function(ply,key)\n        if ply == Driver then\n            if key == 8 then\n                W = 0\n            elseif key == 512 then\n                A = 0\n            elseif key == 16 then\n                S = 0\n            elseif key == 1024 then\n                D = 0\n            elseif key == 131072 then\n                Shift = 0\n            elseif key == 2 then\n                Space = 0\n            end\n        end\n    end)\n    \n    Holo = holograms.create(entities.self():GetPos(),Angle(0,0,0),\"models/hunter/blocks/cube025x025x025.mdl\",Vector(1,1,1))\n    Holo:SetColor(Color(255,0,0))\n    hook.Add(\"Think\",\"HobThink\",function() \n        \n        local ThrstMul = 50 * Mass\n        local PitchMul = 5 * Mass\n        local YawMul = 5 * Mass\n        local RollMul = 500 * Mass\n        \n        --internal vars\n        local Ent = entities.self():IsWeldedTo()\n        Driver = entities.entity(Seat):GetDriver() \n        Throttle = math.Clamp(Throttle + W/100 - S/100, 0 , 1)\n        if Driver:IsValid() then \n            Holo:setPos(Driver:EyePos() + Driver:EyeAngles():Forward()*500 +Offset)\n            Ang = (Driver:EyePos() - Holo:GetPos()):Angle()\n            Ang[2] = Ang[2] - Ent:GetAngles()[2]\n            Ang[2] = Ang[2] + 90\n            Ang[1] = Ang[1] - Ent:GetAngles()[3]\n            Ang:Normalize()\n            Text = \"Pitch: \" .. math.Round(Ang[1]) .. \" Yaw: \" .. math.Round(Ang[2]) .. \" Roll: \" .. (D-A)\n            Ent:ApplyAngForce(Angle(RollMul*(D-A),YawMul*Ang[2],PitchMul*Ang[1]))\n            Ent:ApplyForceCenter(-Ent:GetRight()*ThrstMul*Throttle)\n        end\n        NetworkVars()\n    end)\n    \n\n\nelse\n    Driver = nil\n    Text = \"\"\n    hook.Add(\"net\",\"HobNet\",function(Name)\n        if Name == \"Throttle\" then\n            Throttle = net.ReadDouble()\n            Driver = entities.entity(net.ReadInt(8))\n            Text = net.ReadString()\n        end\n    end)\n    Throttle = 0.5\n    hook.Add(\"HUDPaint\",\"HobPaint\",function() \n        if entities.player() == Driver then\n            local w,h = surface.ScreenW(), surface.ScreenH()\n            surface.SetDrawColor(Color(200,200,200))\n            surface.DrawRect(21,h-160,290,30)\n            surface.SetDrawColor(Color(100,100,100))\n            surface.DrawRect(23,h-158,286*Throttle,26)\n            surface.SetTextColor(Color(255,255,255))\n            surface.SetTextPos(23,h-175)\n            surface.DrawText(Text)\n        end\n    end)\nend"},"selectedTab":1}